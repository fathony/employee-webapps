<div class="page-title d-flex flex-column justify-content-center flex-wrap mb-6">
  <h1 class="page-heading d-flex text-dark fw-bold fs-1 flex-column justify-content-center my-0">
    Employee List
  </h1>
  <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
    <li class="breadcrumb-item text-dark">
      <a routerLink="/" class="text-dark text-hover-primary cursor-pointer">Home</a>
    </li>
    <span class="breadcrumb-item fw-bold text-muted"> / </span>
    <li class="breadcrumb-item text-muted">Employee</li>
    <span class="breadcrumb-item fw-bold text-muted"> / </span>
    <li class="breadcrumb-item text-muted">List</li>
  </ul>
</div>

<div class="row gy-5 gx-xl-8">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <div class="mb-6">
          <a routerLink="/employee/add" class="btn btn-success"><i class="fas fa-plus"></i> Add Employee</a>
        </div>

        <p-table
          #dt
          [value]="employees"
          responsiveLayout="scroll"
          [paginator]="true"
          [rows]="10"
          [totalRecords]="100"
          [rowHover]="true"
          [showCurrentPageReport]="true"
          [rowsPerPageOptions]="[10,50,100]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} data"
          [sortOrder]="1"
          [globalFilterFields]="['username','email']"
        >
          <ng-template pTemplate="caption">
            <div class="flex">
                <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" [(ngModel)]="search" (input)="onFilter()" placeholder="Search By Last Name And Email" style="width: 300px"/>
                </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="username">
                Username
                <p-sortIcon field="username"></p-sortIcon>
              </th>
              <th pSortableColumn="firstName">
                First Name
                <p-sortIcon field="firstName"></p-sortIcon>
              </th>
              <th pSortableColumn="lastName">
                Last Name
                <p-sortIcon field="lastName"></p-sortIcon>
              </th>
              <th pSortableColumn="email">
                Email
                <p-sortIcon field="email"></p-sortIcon>
              </th>
              <th pSortableColumn="birthDate">
                Birth Date
                <p-sortIcon field="birthDate"></p-sortIcon>
              </th>
              <th pSortableColumn="basicSalary">
                Basic Salary
                <p-sortIcon field="basicSalary"></p-sortIcon>
              </th>
              <th pSortableColumn="status">
                Status
                <p-sortIcon field="status"></p-sortIcon>
              </th>
              <th pSortableColumn="group">
                Group
                <p-sortIcon field="group"></p-sortIcon>
              </th>
              <th pSortableColumn="description">
                Description
                <p-sortIcon field="description"></p-sortIcon>
              </th>
              <th>
                Action
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-employee>
            <tr>
              <td>{{employee.username}}</td>
              <td>{{employee.firstName}}</td>
              <td>{{employee.lastName}}</td>
              <td>{{employee.email}}</td>
              <td>{{employee.birthDate}}</td>
              <td>{{employee.basicSalary}}</td>
              <td>
                <span class="badge badge-success" *ngIf="employee.status === 'active'">Active</span>
                <span class="badge badge-danger" *ngIf="employee.status === 'inactive'">In-Active</span>
              </td>
              <td>{{employee.group}}</td>
              <td>{{employee.description}}</td>
              <td>
                <a href="javascript:void(0)"
                   class="btn btn-sm btn-primary btn-flex btn-center btn-active-light-primary"
                   data-kt-menu-trigger="click"
                   data-kt-menu-placement="bottom-end"
                   data-kt-menu-flip="top-end"
                   data-kt-menu="true"
                >
                  Actions
                  <i class="fa-solid fa-angle-down fs-5 ms-1 mt-1"></i> </a>
                <!--begin::Menu-->
                <div
                  class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-125px py-4"
                  data-kt-menu="true" style="">

                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <a href="javascript:void(0)" class="menu-link px-3" (click)="onDetail(employee.username)">
                      Detail
                    </a>
                  </div>
                  <!--end::Menu item-->

                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <a href="javascript:void(0)" class="menu-link px-3" (click)="onUpdate(employee.username)">
                      Update
                    </a>
                  </div>
                  <!--end::Menu item-->

                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <a href="javascript:void(0)" class="menu-link px-3" (click)="onDelete(employee.username)">
                      Delete
                    </a>
                  </div>
                  <!--end::Menu item-->
                </div>
                <!--end::Menu-->
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>

<p-toast></p-toast>
